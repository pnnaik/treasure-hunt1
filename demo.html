<!doctype html>
<html lang="gu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scanner тЖТ Question тЖТ Winner</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .modal-centered { display:flex; align-items:center; justify-content:center; min-height:60vh; }
    .confetti { position:fixed; pointer-events:none; z-index:1055; }
    .car-logo { width:100px; }
  </style>
</head>
<body class="p-4">

<div class="container text-center">
  <h3>Scan тЖТ Question тЖТ Winner</h3>
  <button id="mockScanBtn" class="btn btn-primary mt-3">Mock Scan</button>
  <div id="log" class="mt-3"></div>
</div>

<!-- Question Modal -->
<div id="questionModal" class="modal" tabindex="-1">
  <div class="modal-dialog modal-centered">
    <div class="modal-content text-center p-3">
      <h5 class="mb-3">рккрлНрк░рк╢рлНрки тАФ рккрлНрк░ркерко ркЪрлЛрк░рлА ркХрлНркпрк╛рк░рлЗ ркеркИ?</h5>
      <input id="yearInput" type="number" class="form-control text-center" placeholder="ркЬрк╡рк╛ркм рк▓ркЦрлЛ (Year)">
      <p id="hint" class="mt-2 text-muted small"></p>
      <button class="btn btn-success mt-3" onclick="checkYear()">Submit</button>
    </div>
  </div>
</div>

<!-- Car Logo Modal -->
<div id="logoModal" class="modal" tabindex="-1">
  <div class="modal-dialog modal-centered">
    <div class="modal-content text-center p-4">
      <p>Chori<span>      <img src="https://img.indianautosblog.com/2020/03/24/maruti-swift-front-three-quarters-left-side-4a8f.jpg" class="car-logo mb-3" alt="Car Logo">
</span></p>
      <h5>ЁЯОЙ рк╕рк╛ркЪрлЛ ркЬрк╡рк╛ркм! ЁЯОЙ</h5>
      <button class="btn btn-primary mt-3" onclick="showCarCheck()">Next</button>
    </div>
  </div>
</div>

<!-- Car Check Modal -->
<div id="carModal" class="modal" tabindex="-1">
  <div class="modal-dialog modal-centered">
    <div class="modal-content text-center p-4">
      <h5>ркХрк╛рк░ ркиркВркмрк░ ркирк╛ркЦрлЛ</h5>
      <input id="carInput" type="text" class="form-control text-center" placeholder="enter number" maxlength="10">
      <p id="carHint" class="text-muted small mt-2"></p>
      <button class="btn btn-success mt-3" onclick="checkCar()">Check</button>
    </div>
  </div>
</div>

<!-- Winner Modal -->
<div id="winnerModal" class="modal" tabindex="-1">
  <div class="modal-dialog modal-centered">
    <div class="modal-content text-center p-4">
      <h4>ркЕркнрк┐ркиркВркжрки ЁЯОЙ ркдркорлЗ Winner ркЫрлЛ!</h4>
    </div>
  </div>
</div>

<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const qModal = new bootstrap.Modal(document.getElementById('questionModal'), {backdrop:'static', keyboard:false});
  const logoModal = new bootstrap.Modal(document.getElementById('logoModal'), {backdrop:'static', keyboard:false});
  const carModal = new bootstrap.Modal(document.getElementById('carModal'), {backdrop:'static', keyboard:false});
  const wModal = new bootstrap.Modal(document.getElementById('winnerModal'), {backdrop:'static', keyboard:false});

  const correctYear = 2012;
  const correctCar = "GJ21DD6644";

  // Mock QR Scan
  document.getElementById('mockScanBtn').addEventListener('click', ()=>{
    log('QR Code Scanned тЬЕ');
    qModal.show();
  });

  // Step 1: Year Check
  function checkYear(){
    const year = parseInt(document.getElementById('yearInput').value);
    if(year === correctYear){
      qModal.hide();
      logoModal.show();
    } else {
      document.getElementById('hint').innerText = 'тЭМ ркЦрлЛркЯрлЛ ркЬрк╡рк╛ркм тАФ рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ.';
    }
  }

  // Step 2: Show Car Input
  function showCarCheck(){
    logoModal.hide();
    carModal.show();
  }

  // Step 3: Car Check
  function checkCar(){
    const car = document.getElementById('carInput').value.trim().toUpperCase();
    if(car === correctCar){
      carModal.hide();
      document.getElementById('winSound').play().catch(()=>{});
      launchConfetti();
      wModal.show();
    } else {
      document.getElementById('carHint').innerText = 'тЭМ ркЦрлЛркЯрлЛ ркиркВркмрк░, рклрк░рлА рккрлНрк░ркпрк╛рк╕ ркХрк░рлЛ.';
    }
  }

  // Confetti Animation
  function launchConfetti(){
    for(let i=0;i<60;i++){
      const el = document.createElement('div');
      el.className='confetti';
      el.style.left=(10+Math.random()*80)+'%';
      el.style.top=(10+Math.random()*30)+'%';
      el.style.width='8px'; el.style.height='12px';
      el.style.background = `hsl(${Math.random()*360},80%,60%)`;
      el.style.opacity=0.95;
      el.style.transform = `rotate(${Math.random()*360}deg)`;
      el.style.transition = 'transform 1200ms linear, opacity 1200ms linear';
      document.body.appendChild(el);
      setTimeout(()=> {
        el.style.transform = `translateY(${400+Math.random()*300}px) rotate(${Math.random()*720}deg)`;
        el.style.opacity='0';
      }, 20);
      setTimeout(()=> el.remove(), 1400);
    }
  }

  // Log helper
  function log(msg){
    const l = document.getElementById('log');
    const p = document.createElement('div');
    p.innerText = `[${new Date().toLocaleTimeString()}] ${msg}`;
    l.prepend(p);
  }
</script>
</body>
</html>
